<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">

<title>–õ–∏–∑–∞ ‚ú®</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
html, body { background:#000; min-height:100dvh; font-family:Arial,sans-serif; overflow-x:hidden; }

/* ===== HERO ===== */
.hero {
    position: relative;
    height: 100dvh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    background: radial-gradient(circle at center, #050510 0%, #000 80%);
    padding-bottom:15px;
}
canvas { position:absolute; top:0; left:0; }

/* ===== –¢–ï–ö–°–¢ ===== */
h1 {
    font-size:120px;
    font-weight:bold;
    z-index:2;
    opacity:0;
    transform:scale(0.8);
    background: linear-gradient(45deg,#ff00cc,#3333ff,#00ffff,#ffcc00,#ff0066);
    background-size:400% 400%;
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    animation: gradientMove 6s ease infinite, fadeInText 3s ease forwards;
    text-shadow:0 0 25px rgba(255,255,255,0.4);
}
@keyframes gradientMove { 0% {background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
@keyframes fadeInText { to{opacity:1; transform:scale(1);} }

/* ===== –õ–ï–ù–¢–ê ===== */
.feed {
    background:#000;
    display:flex;
    flex-direction:column;
    padding:20px;
    gap:20px;
}
.feed img {
    width:100%;
    display:block;
    border-radius:8px;
    object-fit:cover;
}

/* ===== –î–û–ö –ë–ê–† ===== */
#dock {
    position: fixed;
    bottom:0;
    left:0;
    width:100%;
    background:rgba(0,0,0,0.85);
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:10px 20px;
    color:#fff;
    font-family:Arial,sans-serif;
    z-index:999;
}

#dock .track-info {
    display:flex;
    flex-direction:column;
}

#dock .controls button {
    background:none;
    border:none;
    color:#fff;
    font-size:18px;
    margin-left:10px;
    cursor:pointer;
}

#dock .controls button:hover { color:#ff00cc; }

#dock input[type=file] {
    display:none;
}
</style>
</head>
<body>

<div class="hero">
    <canvas id="stars"></canvas>
    <h1 id="heroText">lizasex</h1>
</div>

<div class="feed">
    <img src="IMG_0146.jpeg">
    <img src="IMG_0148.jpeg">
    <img src="IMG_0149.jpeg">
    <img src="IMG_0150.jpeg">
    <img src="IMG_0151.jpeg">
    <img src="IMG_0152.jpeg">
    <img src="IMG_0153.jpeg">
    <img src="IMG_0154.jpeg">
</div>

<!-- ===== –î–û–ö –ë–ê–† ===== -->
<div id="dock">
    <div class="track-info">
        <span id="track-title">–ù–µ –≤—ã–±—Ä–∞–Ω —Ç—Ä–µ–∫</span>
        <span id="track-artist"></span>
    </div>
    <div class="controls">
        <button id="prev">‚èÆÔ∏è</button>
        <button id="play">‚ñ∂Ô∏è</button>
        <button id="next">‚è≠Ô∏è</button>
        <label for="file-input">üéµ</label>
        <input type="file" id="file-input" multiple accept="audio/mp3">
    </div>
</div>

<audio id="bgMusic"></audio>

<!-- jsmediatags –¥–ª—è —á—Ç–µ–Ω–∏—è ID3 -->
<script src="https://cdn.jsdelivr.net/npm/jsmediatags@3.9.5/dist/jsmediatags.min.js"></script>

<script>
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
const heroText = document.getElementById("heroText");
const music = document.getElementById("bgMusic");
const trackTitle = document.getElementById("track-title");
const trackArtist = document.getElementById("track-artist");
const fileInput = document.getElementById("file-input");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");

function resizeCanvas(){ canvas.width=window.innerWidth; canvas.height=window.innerHeight; }
resizeCanvas(); window.addEventListener("resize", resizeCanvas);

// ===== –ó–í–Å–ó–î–´ =====
let stars=[], mouseX=0, mouseY=0;
for(let i=0;i<250;i++){
    stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, radius:Math.random()*1.5, speed:Math.random()*0.6, alpha:Math.random(), twinkleSpeed:Math.random()*0.02});
}
function drawStars(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(star=>{
        star.alpha += star.twinkleSpeed;
        if(star.alpha>1) star.twinkleSpeed*=-1;
        if(star.alpha<0) star.twinkleSpeed*=-1;
        ctx.globalAlpha=star.alpha;
        ctx.beginPath();
        ctx.arc(star.x+mouseX*0.02, star.y+mouseY*0.02, star.radius,0,Math.PI*2);
        ctx.fillStyle="white";
        ctx.fill();
        star.y += star.speed;
        if(star.y>canvas.height){ star.y=0; star.x=Math.random()*canvas.width; }
    });
    ctx.globalAlpha=1;
    requestAnimationFrame(drawStars);
}
drawStars();
window.addEventListener("mousemove", e => { mouseX=(e.clientX-canvas.width/2)/50; mouseY=(e.clientY-canvas.height/2)/50; });

// ===== Web Audio API =====
let audioCtx, analyser, source, dataArray;
function setupAudio(){
    audioCtx = new (window.AudioContext||window.webkitAudioContext)();
    source = audioCtx.createMediaElementSource(music);
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 256;
    source.connect(analyser);
    analyser.connect(audioCtx.destination);
    dataArray = new Uint8Array(analyser.frequencyBinCount);
}

function animateAudio(){
    if(analyser){
        analyser.getByteFrequencyData(dataArray);
        let sum=0; for(let i=0;i<dataArray.length;i++) sum+=dataArray[i];
        let avg = sum/dataArray.length;

        // —Ç–µ–∫—Å—Ç –ø—É–ª—å—Å–∏—Ä—É–µ—Ç
        heroText.style.transform = `scale(${1+avg/1000})`;

        // –∑–≤—ë–∑–¥—ã —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –≥—Ä–æ–º–∫–æ—Å—Ç—å
        stars.forEach(star=>{
            star.alpha = Math.min(1, Math.max(0.2, star.alpha + avg/5000));
        });
    }
    requestAnimationFrame(animateAudio);
}

// ===== –¢–†–ï–ö–ò =====
let tracks=[], currentTrack=0;

function loadTrack(file){
    const url = URL.createObjectURL(file);
    music.src = url;
    music.load();

    // —á–∏—Ç–∞–µ–º ID3
    jsmediatags.read(file,{
        onSuccess: tag=>{
            trackTitle.textContent = tag.tags.title || file.name;
            trackArtist.textContent = tag.tags.artist || '';
        },
        onError: err=>{
            trackTitle.textContent = file.name;
            trackArtist.textContent = '';
        }
    });
}

// –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤
fileInput.addEventListener("change", e=>{
    tracks = Array.from(e.target.files);
    currentTrack = 0;
    loadTrack(tracks[currentTrack]);
    music.play();
    if(!audioCtx) setupAudio();
    animateAudio();
    playBtn.textContent="‚è∏Ô∏è";
});

// –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
playBtn.addEventListener("click", ()=>{
    if(music.paused){ music.play(); playBtn.textContent="‚è∏Ô∏è"; } 
    else { music.pause(); playBtn.textContent="‚ñ∂Ô∏è"; }
});

prevBtn.addEventListener("click", ()=>{
    if(tracks.length>0){ currentTrack=(currentTrack-1+tracks.length)%tracks.length; loadTrack(tracks[currentTrack]); music.play(); }
});

nextBtn.addEventListener("click", ()=>{
    if(tracks.length>0){ currentTrack=(currentTrack+1)%tracks.length; loadTrack(tracks[currentTrack]); music.play(); }
});

// –∞–≤—Ç–æ–ø–ª–µ–π —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç—Ä–µ–∫–∞
music.addEventListener("ended", ()=>{
    if(tracks.length>0){ currentTrack=(currentTrack+1)%tracks.length; loadTrack(tracks[currentTrack]); music.play(); }
});

// —Å—Ç–∞—Ä—Ç –º—É–∑—ã–∫–∏ –Ω–∞ –∫–ª–∏–∫
document.addEventListener("click", ()=>{
    if(!audioCtx && music.src){ setupAudio(); animateAudio(); }
}, {once:true});
</script>

</body>
</html>